<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Heritage Trove - Vintage Pendants</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Discover unique vintage pendants at The Heritage Trove. A curated selection of historic and handcrafted pieces from around the world, blending luxury with a progressive shopping experience.">
    <meta name="keywords" content="vintage pendants, antique jewelry, heritage, collectible, unique gifts, old jewelry, handmade, bespoke, luxury, handcrafted">

    <!-- Social Sharing Meta Tags (Open Graph, Twitter Cards) -->
    <meta property="og:title" content="The Heritage Trove - Vintage Pendants">
    <meta property="og:description" content="Discover unique vintage pendants at The Heritage Trove. A curated selection of historic and handcrafted pieces from around the world, blending luxury with a progressive shopping experience.">
    <meta property="og:image" content="https://via.placeholder.com/1200x630/F4EDDC/3C3B3C?text=The+Heritage+Trove">
    <meta property="og:url" content="https://heritagetrove.com/shop">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="The Heritage Trove - Vintage Pendants">
    <meta name="twitter:description" content="Discover unique vintage pendants at The Heritage Trove. A curated selection of historic and handcrafted pieces from around the world, blending luxury with a progressive shopping experience.">
    <meta name="twitter:image" content="https://via.placeholder.com/1200x630/F4EDDC/3C3B3C?text=The+Heritage+Trove">

    <!-- Google Fonts -->
    <!-- Fonts chosen for a luxury but progressive feel: Cormorant Garamond for headings (elegant, traditional), Inter for body (modern, clean, highly legible) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /*
        * CSS Styles for The Heritage Trove
        * Inspired by rhodeskin.com's luxury progressive aesthetic.
        *
        * Colors:
        * --color-primary: A rich, dark grey for text and strong elements.
        * --color-secondary: A warm, off-white/cream for backgrounds.
        * --color-accent: A subtle, sophisticated gold/brass for highlights.
        * --color-text-light: Lighter grey for secondary text.
        * --color-border: Light grey for subtle borders.
        * --color-error: Red for validation/errors.
        *
        * Fonts:
        * --font-heading: 'Cormorant Garamond', serif (elegant, traditional).
        * --font-body: 'Inter', sans-serif (modern, clean, legible).
        *
        * Breakpoints:
        * Desktop: > 1200px
        * Tablet Large: 900px - 1200px
        * Tablet Small / Mobile Landscape: 600px - 900px
        * Mobile: < 600px
        */

        :root {
            /* Colors */
            --color-primary: #3C3B3C; /* Dark Charcoal */
            --color-secondary: #F4EDDC; /* Creamy Off-White */
            --color-accent: #B28F6A; /* Muted Gold/Brass */
            --color-text-light: #6C6C6C; /* Medium Grey */
            --color-border: #D1D1D1; /* Light Grey */
            --color-error: #E57373; /* Light Red */
            --color-white: #FFFFFF;

            /* Fonts */
            --font-heading: 'Cormorant Garamond', serif;
            --font-body: 'Inter', sans-serif;

            /* Spacing */
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;

            /* Border Radius */
            --border-radius-sm: 4px;
            --border-radius-md: 8px;

            /* Transitions */
            --transition-speed: 0.3s;
            --transition-ease: ease-in-out;
        }

        /* Base Styles & Typography */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.6;
            color: var(--color-primary);
            background-color: var(--color-secondary);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: var(--font-heading);
            font-weight: 500;
            margin-bottom: var(--spacing-sm);
            color: var(--color-primary);
        }

        h1 { font-size: 3rem; line-height: 1.1; }
        h2 { font-size: 2.2rem; line-height: 1.2; }
        h3 { font-size: 1.8rem; line-height: 1.3; }
        h4 { font-size: 1.5rem; line-height: 1.4; }
        p { margin-bottom: var(--spacing-sm); }

        a {
            color: var(--color-primary);
            text-decoration: none;
            transition: color var(--transition-speed) var(--transition-ease);
        }

        a:hover, a:focus {
            color: var(--color-accent);
        }

        /* Utility Classes */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--spacing-md);
        }

        /* Buttons */
        button {
            cursor: pointer;
            border: none;
            background: none;
            padding: 0;
            color: inherit;
        }

        .button-primary, .button-secondary {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.8rem 1.5rem;
            border-radius: var(--border-radius-sm);
            font-family: var(--font-body);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: all var(--transition-speed) var(--transition-ease);
        }

        .button-primary {
            background-color: var(--color-primary);
            color: var(--color-secondary);
            border: 1px solid var(--color-primary);
        }

        .button-primary:hover, .button-primary:focus {
            background-color: var(--color-accent);
            border-color: var(--color-accent);
            color: var(--color-white);
        }

        .button-secondary {
            background-color: transparent;
            color: var(--color-primary);
            border: 1px solid var(--color-primary);
        }

        .button-secondary:hover, .button-secondary:focus {
            background-color: var(--color-primary);
            color: var(--color-secondary);
        }

        .icon-button {
            padding: var(--spacing-xs);
            font-size: 1.5rem;
            color: var(--color-primary);
            transition: color var(--transition-speed) var(--transition-ease);
        }

        .icon-button:hover, .icon-button:focus {
            color: var(--color-accent);
        }

        /* Forms */
        input[type="text"],
        input[type="email"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius-sm);
            background-color: var(--color-secondary);
            font-family: var(--font-body);
            font-size: 1rem;
            color: var(--color-primary);
            transition: border-color var(--transition-speed) var(--transition-ease),
                        box-shadow var(--transition-speed) var(--transition-ease);
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="number"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--color-accent);
            box-shadow: 0 0 0 2px rgba(178, 143, 106, 0.2); /* Soft focus ring */
        }

        label {
            display: block;
            margin-bottom: var(--spacing-xs);
            font-weight: 500;
            font-size: 0.95rem;
        }

        .form-group {
            margin-bottom: var(--spacing-md);
        }

        /* Header */
        .main-header {
            background-color: var(--color-secondary);
            border-bottom: 1px solid var(--color-border);
            padding: var(--spacing-sm) var(--spacing-md);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1600px;
            margin: 0 auto;
        }

        .logo {
            font-family: var(--font-heading);
            font-size: 1.8rem;
            font-weight: 600;
            letter-spacing: 0.05em;
            color: var(--color-primary);
        }

        .main-nav .nav-links {
            list-style: none;
            display: flex;
            gap: var(--spacing-xl);
        }

        .main-nav .nav-links a {
            font-weight: 500;
            font-size: 1.1rem;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .search-container {
            position: relative;
            display: flex;
            align-items: center;
        }
        .search-container input {
            border: none;
            border-bottom: 1px solid var(--color-border);
            background-color: transparent;
            padding: 0.5rem var(--spacing-md) 0.5rem var(--spacing-xs);
            font-size: 1rem;
            width: 150px;
            transition: width var(--transition-speed) var(--transition-ease);
        }
        .search-container input:focus {
            width: 200px; /* Expand on focus */
            border-color: var(--color-primary);
            box-shadow: none;
        }
        .search-container .icon-button {
            position: absolute;
            right: 0;
            font-size: 1.2rem;
        }

        .cart-count {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: var(--color-accent);
            color: var(--color-white);
            border-radius: 50%;
            min-width: 1.2em;
            height: 1.2em;
            font-size: 0.75rem;
            margin-left: -5px; /* Overlap with icon */
        }
        .menu-toggle { display: none; } /* Hidden on desktop */

        /* Main Content & Shop Layout */
        .shop-page {
            display: flex;
            max-width: 1600px;
            margin: var(--spacing-lg) auto;
            gap: var(--spacing-xl);
            padding: 0 var(--spacing-md);
        }

        .sidebar {
            flex: 0 0 280px; /* Fixed width sidebar for desktop */
            padding: var(--spacing-md);
            background-color: var(--color-white);
            border-radius: var(--border-radius-md);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform var(--transition-speed) var(--transition-ease), opacity var(--transition-speed) var(--transition-ease);
        }

        .sidebar h2, .sidebar h3 {
            font-size: 1.4rem;
            margin-bottom: var(--spacing-md);
        }

        .filter-group {
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--color-border);
        }
        .filter-group:last-of-type {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-xs);
        }

        .tag {
            background-color: var(--color-border);
            color: var(--color-primary);
            padding: 0.4rem 0.8rem;
            border-radius: var(--border-radius-sm);
            font-size: 0.9rem;
            cursor: pointer;
            transition: background-color var(--transition-speed) var(--transition-ease), color var(--transition-speed) var(--transition-ease);
            border: 1px solid var(--color-border);
        }

        .tag:hover, .tag.active {
            background-color: var(--color-primary);
            color: var(--color-secondary);
        }
        .tag.active {
            border-color: var(--color-primary);
        }
        .tag .count {
            font-size: 0.8em;
            margin-left: 0.3em;
            opacity: 0.8;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            margin-bottom: var(--spacing-xs);
            cursor: pointer;
        }

        .checkbox-group input[type="checkbox"] {
            margin-right: var(--spacing-xs);
            accent-color: var(--color-primary); /* Style checkbox itself */
        }

        /* Range Sliders (Custom Styling) */
        .range-slider-group {
            position: relative;
            margin-top: var(--spacing-md);
        }
        .range-slider {
            width: 100%;
            height: 2px;
            background-color: var(--color-border);
            margin-top: var(--spacing-md);
            position: relative;
            z-index: 1;
        }
        .range-slider input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 2px;
            background: transparent;
            position: absolute;
            pointer-events: none; /* Make inputs only visible for focus/active states */
        }

        .range-slider input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--color-primary);
            cursor: grab;
            margin-top: -8px; /* Center thumb on track */
            pointer-events: all;
            border: 2px solid var(--color-white);
            transition: background-color var(--transition-speed) var(--transition-ease), border-color var(--transition-speed) var(--transition-ease);
        }
        .range-slider input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--color-primary);
            cursor: grab;
            margin-top: -8px;
            pointer-events: all;
            border: 2px solid var(--color-white);
            transition: background-color var(--transition-speed) var(--transition-ease), border-color var(--transition-speed) var(--transition-ease);
        }
        .range-slider input[type="range"]::-webkit-slider-thumb:hover,
        .range-slider input[type="range"]::-moz-range-thumb:hover {
            background-color: var(--color-accent);
        }

        .range-values {
            display: flex;
            justify-content: space-between;
            margin-top: var(--spacing-sm);
            font-size: 0.9rem;
            color: var(--color-text-light);
        }
        .range-values span {
            font-weight: 500;
            color: var(--color-primary);
        }
        /* Highlight the track between thumbs */
        .range-track-active {
            position: absolute;
            height: 2px;
            background-color: var(--color-primary);
            z-index: 2;
        }

        .clear-filters-btn {
            background-color: transparent;
            border: 1px solid var(--color-primary);
            color: var(--color-primary);
            width: 100%;
            padding: 0.6rem;
            border-radius: var(--border-radius-sm);
            margin-top: var(--spacing-lg);
            font-size: 0.9rem;
            transition: all var(--transition-speed) var(--transition-ease);
        }
        .clear-filters-btn:hover {
            background-color: var(--color-primary);
            color: var(--color-secondary);
        }

        .product-listing {
            flex: 1;
            padding: var(--spacing-md);
            background-color: var(--color-white);
            border-radius: var(--border-radius-md);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .shop-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--color-border);
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
        }

        .active-filters-summary {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-xs);
        }
        .active-filter-tag {
            background-color: var(--color-primary);
            color: var(--color-white);
            padding: 0.3rem 0.6rem;
            border-radius: var(--border-radius-sm);
            font-size: 0.85rem;
            display: inline-flex;
            align-items: center;
        }
        .active-filter-tag button {
            background: none;
            border: none;
            color: var(--color-white);
            margin-left: var(--spacing-xs);
            cursor: pointer;
            font-size: 0.9em;
            opacity: 0.8;
            transition: opacity var(--transition-speed) var(--transition-ease);
        }
        .active-filter-tag button:hover {
            opacity: 1;
        }

        .sort-options select {
            border: 1px solid var(--color-border);
            padding: 0.5rem;
            border-radius: var(--border-radius-sm);
            background-color: var(--color-secondary);
            cursor: pointer;
        }
        .sort-options select:focus {
            border-color: var(--color-accent);
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: var(--spacing-lg);
        }

        .product-card {
            background-color: var(--color-white);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius-md);
            overflow: hidden;
            text-align: center;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            transition: transform var(--transition-speed) var(--transition-ease), box-shadow var(--transition-speed) var(--transition-ease);
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .product-card .image-container {
            width: 100%;
            aspect-ratio: 1/1; /* Square images */
            overflow: hidden;
            position: relative;
            background-color: #f0f0f0; /* Placeholder background */
        }
        .product-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity var(--transition-speed) var(--transition-ease);
            display: block; /* Remove extra space below image */
        }
        /* Image loading skeleton effect */
        .product-card img:not([src]) {
            opacity: 0;
        }
        .product-card .image-container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
            transform: translateX(-100%);
            animation: shimmer 1.5s infinite;
        }
        .product-card img[src] + .image-container::after {
             animation: none; /* Stop shimmer when image loads */
             display: none;
        }

        @keyframes shimmer {
            100% {
                transform: translateX(100%);
            }
        }


        .product-card-info {
            padding: var(--spacing-md);
            text-align: left;
            flex-grow: 1; /* Allow info section to take available space */
            display: flex;
            flex-direction: column;
        }

        .product-card-title {
            font-family: var(--font-heading);
            font-size: 1.3rem;
            font-weight: 500;
            margin-bottom: var(--spacing-xs);
            height: 3.2em; /* Ensure consistent height for titles over 2 lines */
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .product-card-meta {
            font-size: 0.9rem;
            color: var(--color-text-light);
            margin-bottom: var(--spacing-sm);
        }

        .product-card-price {
            font-size: 1.4rem;
            font-weight: 600;
            margin-top: auto; /* Push price to the bottom */
        }

        .product-card-actions {
            display: flex;
            justify-content: space-between;
            gap: var(--spacing-xs);
            margin-top: var(--spacing-md);
            padding-top: var(--spacing-sm);
            border-top: 1px solid var(--color-border);
        }
        .product-card-actions .button-primary,
        .product-card-actions .button-secondary {
            flex: 1;
            padding: 0.6rem;
            font-size: 0.9rem;
        }
        .product-card-actions .button-secondary {
            border: 1px solid var(--color-text-light);
            color: var(--color-text-light);
        }
        .product-card-actions .button-secondary:hover {
            border-color: var(--color-accent);
            color: var(--color-accent);
            background-color: transparent;
        }

        .loading-message, .no-results-message {
            grid-column: 1 / -1; /* Span all columns */
            text-align: center;
            padding: var(--spacing-xl);
            font-size: 1.2rem;
            color: var(--color-text-light);
        }

        /* Modals */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 200;
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s var(--transition-speed), opacity var(--transition-speed) var(--transition-ease);
        }

        .modal.is-open {
            visibility: visible;
            opacity: 1;
            transition-delay: 0s;
        }

        .modal-content {
            background-color: var(--color-secondary);
            border-radius: var(--border-radius-md);
            max-width: 900px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            padding: var(--spacing-lg);
            transform: translateY(20px);
            transition: transform var(--transition-speed) var(--transition-ease);
        }

        .modal.is-open .modal-content {
            transform: translateY(0);
        }

        .close-modal {
            position: absolute;
            top: var(--spacing-md);
            right: var(--spacing-md);
            font-size: 2rem;
            z-index: 1;
            color: var(--color-primary);
        }

        .modal-body {
            display: flex;
            gap: var(--spacing-xl);
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
        }

        .product-images {
            flex: 1 1 40%; /* Take 40% width, flexible */
            min-width: 280px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .product-images .main-image {
            width: 100%;
            max-height: 400px;
            object-fit: contain;
            border-radius: var(--border-radius-sm);
            margin-bottom: var(--spacing-md);
            border: 1px solid var(--color-border);
        }

        .image-carousel-nav {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-bottom: var(--spacing-sm);
            gap: var(--spacing-sm);
        }
        .image-carousel-nav button {
            background-color: var(--color-border);
            color: var(--color-primary);
            border-radius: var(--border-radius-sm);
            padding: 0.5rem 1rem;
            font-size: 1.2rem;
            transition: background-color var(--transition-speed) var(--transition-ease), color var(--transition-speed) var(--transition-ease);
        }
        .image-carousel-nav button:hover {
            background-color: var(--color-primary);
            color: var(--color-white);
        }

        .thumbnail-nav {
            display: flex;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-sm);
        }

        .thumbnail-nav .thumbnail {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border: 2px solid var(--color-border);
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: border-color var(--transition-speed) var(--transition-ease);
        }

        .thumbnail-nav .thumbnail.active,
        .thumbnail-nav .thumbnail:hover {
            border-color: var(--color-accent);
        }

        .product-info {
            flex: 1 1 50%; /* Take 50% width, flexible */
            min-width: 280px;
        }

        .product-info h2 {
            font-size: 2rem;
            margin-bottom: var(--spacing-sm);
            color: var(--color-primary);
        }

        .product-info .product-price {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--color-accent);
            margin-bottom: var(--spacing-md);
        }

        .product-description {
            margin-bottom: var(--spacing-lg);
            line-height: 1.7;
            color: var(--color-text-light);
        }

        .product-metadata {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: var(--spacing-lg);
        }

        .product-metadata th, .product-metadata td {
            text-align: left;
            padding: 0.6rem 0;
            border-bottom: 1px dashed var(--color-border);
        }

        .product-metadata th {
            font-weight: 600;
            width: 30%;
            color: var(--color-primary);
        }

        .product-metadata td {
            color: var(--color-text-light);
        }
        .product-metadata tr:last-child th, .product-metadata tr:last-child td {
            border-bottom: none;
        }

        .add-to-cart-btn, .add-to-wishlist-btn {
            width: 100%;
            margin-bottom: var(--spacing-sm);
        }

        /* Cart Sidebar */
        .cart-panel {
            position: fixed;
            top: 0;
            right: 0;
            height: 100%;
            width: 350px; /* Fixed width for cart */
            z-index: 250;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            transform: translateX(100%);
            transition: transform var(--transition-speed) var(--transition-ease);
            display: flex;
            flex-direction: column;
            background-color: var(--color-secondary);
            border-radius: 0; /* Remove border-radius on fixed side panel */
        }
        .cart-panel.is-open {
            transform: translateX(0);
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--color-border);
            margin-bottom: var(--spacing-md);
        }
        .cart-header h2 {
            margin-bottom: 0;
        }

        .cart-items {
            flex-grow: 1;
            overflow-y: auto;
            padding-right: var(--spacing-sm); /* For scrollbar */
        }

        .cart-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-sm);
            border-bottom: 1px dashed var(--color-border);
        }
        .cart-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .cart-item-image {
            width: 70px;
            height: 70px;
            object-fit: cover;
            border-radius: var(--border-radius-sm);
            border: 1px solid var(--color-border);
        }

        .cart-item-details {
            flex-grow: 1;
        }
        .cart-item-details h4 {
            font-size: 1rem;
            margin-bottom: var(--spacing-xs);
        }
        .cart-item-details .price {
            font-weight: 600;
            color: var(--color-accent);
            margin-right: var(--spacing-sm);
        }
        .cart-item-details .quantity {
            font-size: 0.9rem;
            color: var(--color-text-light);
        }
        .cart-item-details input[type="number"] {
            width: 60px;
            padding: 0.3rem;
            font-size: 0.9rem;
            height: auto;
        }

        .remove-from-cart {
            font-size: 1.5rem;
            color: var(--color-text-light);
        }
        .remove-from-cart:hover {
            color: var(--color-error);
        }

        .empty-cart-message {
            text-align: center;
            color: var(--color-text-light);
            padding: var(--spacing-lg);
        }

        .cart-summary {
            margin-top: var(--spacing-md);
            padding-top: var(--spacing-md);
            border-top: 1px solid var(--color-border);
        }
        .cart-summary p {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--spacing-xs);
        }
        .cart-summary .cart-total {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--color-primary);
            margin-top: var(--spacing-sm);
            padding-top: var(--spacing-sm);
            border-top: 1px solid var(--color-border);
        }
        .cart-summary .checkout-btn {
            width: 100%;
            margin-top: var(--spacing-md);
        }
        .cart-disclaimer {
            font-size: 0.85rem;
            color: var(--color-text-light);
            text-align: center;
            margin-top: var(--spacing-sm);
        }

        /* Checkout Page (Mock) */
        .checkout-page {
            max-width: 700px;
            margin: var(--spacing-xl) auto;
            padding: var(--spacing-xl);
            background-color: var(--color-white);
            border-radius: var(--border-radius-md);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            display: none; /* Hidden by default, shown by JS */
        }
        .checkout-page h1 {
            text-align: center;
            margin-bottom: var(--spacing-lg);
        }
        .checkout-page h2 {
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-sm);
            border-bottom: 1px solid var(--color-border);
        }
        .checkout-page .place-order-btn,
        .checkout-page .back-to-shop-btn {
            width: 100%;
            margin-top: var(--spacing-md);
        }

        /* Footer */
        .main-footer {
            background-color: var(--color-primary);
            color: var(--color-secondary);
            padding: var(--spacing-xl) var(--spacing-md);
            margin-top: var(--spacing-xl);
            font-size: 0.95rem;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-xl);
            max-width: 1600px;
            margin: 0 auto;
        }

        .footer-section h3 {
            color: var(--color-secondary);
            margin-bottom: var(--spacing-md);
            font-size: 1.1rem;
            font-family: var(--font-body); /* For footer headings */
            font-weight: 600;
        }

        .footer-section p {
            margin-bottom: var(--spacing-xs);
        }

        .footer-section a {
            color: var(--color-secondary);
            display: block;
            margin-bottom: var(--spacing-xs);
        }
        .footer-section a:hover {
            color: var(--color-accent);
        }

        .newsletter-form {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }
        .newsletter-form input {
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--color-white);
            padding: 0.8rem;
        }
        .newsletter-form input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        .newsletter-form button {
            background-color: var(--color-accent);
            color: var(--color-white);
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: var(--border-radius-sm);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: background-color var(--transition-speed) var(--transition-ease);
        }
        .newsletter-form button:hover {
            background-color: var(--color-secondary);
            color: var(--color-primary);
        }

        .social-icons a {
            display: inline-block;
            margin-right: var(--spacing-sm);
            font-size: 1.5rem;
        }

        .copyright {
            text-align: center;
            margin-top: var(--spacing-xl);
            padding-top: var(--spacing-md);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
        }

        /* Backdrop for modals/sidebars */
        .backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4);
            z-index: 199; /* Below modals, above content */
            visibility: hidden;
            opacity: 0;
            transition: opacity var(--transition-speed) var(--transition-ease);
        }
        .backdrop.is-open {
            visibility: visible;
            opacity: 1;
        }

        /* Media Queries for Responsiveness */

        /* Tablet Large - 900px to 1200px */
        @media (max-width: 1200px) {
            .shop-page {
                gap: var(--spacing-md);
            }
            .sidebar {
                flex-basis: 250px;
            }
            .product-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            .main-nav .nav-links {
                gap: var(--spacing-lg);
            }
            .header-content {
                max-width: 1200px;
            }
        }

        /* Tablet Small / Mobile Landscape - 600px to 900px */
        @media (max-width: 900px) {
            h1 { font-size: 2.5rem; }
            h2 { font-size: 1.8rem; }
            h3 { font-size: 1.5rem; }

            .main-nav { display: none; } /* Hide main nav on smaller screens */
            .search-container input { width: 120px; }
            .search-container input:focus { width: 180px; }
            .menu-toggle { display: block; }

            .shop-page {
                flex-direction: column; /* Stack filters and products */
                margin-top: var(--spacing-md);
                gap: var(--spacing-lg);
            }
            .sidebar {
                width: 100%;
                flex-basis: auto;
                max-width: 100%; /* For smaller tablets */
            }
            .product-listing {
                padding: var(--spacing-sm);
            }
            .product-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: var(--spacing-md);
            }
            .product-card-title {
                font-size: 1.2rem;
            }
            .product-card-price {
                font-size: 1.3rem;
            }

            .modal-content {
                max-width: 95%;
                width: 95%;
                padding: var(--spacing-md);
            }
            .modal-body {
                flex-direction: column;
                gap: var(--spacing-md);
            }
            .product-info {
                min-width: unset;
            }
            .product-images {
                min-width: unset;
                order: -1; /* Image section first */
            }
            .cart-panel {
                width: 300px;
            }
        }

        /* Mobile - Less than 600px */
        @media (max-width: 600px) {
            h1 { font-size: 2rem; }
            h2 { font-size: 1.6rem; }
            h3 { font-size: 1.3rem; }

            .header-content {
                padding: var(--spacing-xs) var(--spacing-sm);
            }
            .logo {
                font-size: 1.5rem;
            }
            .search-container input {
                width: 80px;
                padding: 0.3rem 0.5rem;
                font-size: 0.9rem;
            }
            .search-container input:focus {
                width: 150px;
            }
            .header-actions {
                gap: var(--spacing-xs);
            }
            .icon-button {
                font-size: 1.3rem;
            }
            .cart-count {
                min-width: 1.1em;
                height: 1.1em;
                font-size: 0.7rem;
            }

            .shop-page {
                padding: var(--spacing-sm);
                margin: var(--spacing-md) auto;
            }

            .sidebar {
                padding: var(--spacing-sm);
            }

            .shop-toolbar {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--spacing-sm);
                margin-bottom: var(--spacing-md);
            }
            .sort-options {
                width: 100%;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            .sort-options select {
                flex: 1;
                margin-left: var(--spacing-sm);
            }

            .product-grid {
                grid-template-columns: 1fr; /* Single column on very small screens */
                gap: var(--spacing-md);
            }
            .product-card-info {
                padding: var(--spacing-sm);
            }
            .product-card-title {
                font-size: 1.1rem;
            }
            .product-card-price {
                font-size: 1.2rem;
            }
            .product-card-actions {
                flex-direction: column;
                gap: var(--spacing-xs);
            }

            .modal-content {
                padding: var(--spacing-sm);
                max-height: 95vh;
            }
            .close-modal {
                font-size: 1.5rem;
                top: var(--spacing-xs);
                right: var(--spacing-xs);
            }
            .product-info h2 {
                font-size: 1.5rem;
            }
            .product-info .product-price {
                font-size: 1.4rem;
            }
            .product-images .main-image {
                max-height: 250px;
            }
            .thumbnail-nav .thumbnail {
                width: 60px;
                height: 60px;
            }

            .cart-panel {
                width: 100%; /* Full width cart on mobile */
                border-radius: 0;
            }

            .footer-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-lg);
            }
            .newsletter-form button {
                width: auto; /* Revert button width */
            }
        }
    </style>
</head>
<body>
    <!-- Google Analytics/Tag Manager Placeholder -->
    <!--
    <script async src="https://www.googletagmanager.com/gtag/js?id=YOUR_GA_TRACKING_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'YOUR_GA_TRACKING_ID');
    </script>
    -->

    <!-- Backdrop overlay for modals and off-canvas elements -->
    <div class="backdrop" id="backdrop" aria-hidden="true"></div>

    <header class="main-header">
        <div class="header-content">
            <a href="#" class="logo">The Heritage Trove</a>
            <nav class="main-nav" aria-label="Main navigation">
                <ul class="nav-links">
                    <li><a href="#">Shop</a></li>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <div class="search-container">
                    <input type="text" id="search-input" placeholder="Search..." aria-label="Search products by keyword">
                    <button class="icon-button" aria-label="Initiate search">🔍</button>
                </div>
                <button class="icon-button" aria-label="View Wishlist">♡ <span class="wishlist-count sr-only">(0 items)</span></button>
                <button class="icon-button cart-toggle" aria-label="View shopping cart">🛒 <span class="cart-count" aria-live="polite">0</span></button>
                <button class="menu-toggle icon-button" aria-label="Toggle navigation menu">☰</button>
            </div>
        </div>
    </header>

    <main class="shop-page">
        <aside class="sidebar filters-panel" id="filters-panel" aria-label="Product filters and sorting">
            <h2>Filters</h2>
            <div class="filter-group quick-filters">
                <h3>Quick Filters</h3>
                <div id="quick-filters-container" class="tags-container" role="group" aria-label="Popular filter tags">
                    <!-- Quick filter buttons dynamically generated here -->
                </div>
            </div>

            <!-- Dynamic Filters (Country, Material, Shape, Condition, Year, Price) -->
            <div id="dynamic-filters-container">
                <!-- Filter categories will be dynamically injected here -->
            </div>
            <button class="clear-filters-btn button-secondary" id="clear-all-filters">Clear All Filters</button>
        </aside>

        <section class="product-listing" aria-live="polite" aria-relevant="all">
            <div class="shop-toolbar">
                <div class="active-filters-summary" id="active-filters-summary" role="status" aria-label="Currently active filters">
                    <!-- Active filters tags -->
                </div>
                <div class="sort-options">
                    <label for="sort-by" class="sr-only">Sort by:</label>
                    <select id="sort-by" aria-label="Sort products by">
                        <option value="relevance">Relevance</option>
                        <option value="year-desc">Newest</option>
                        <option value="price-asc">Price: Low to High</option>
                        <option value="price-desc">Price: High to Low</option>
                        <option value="size-asc">Size: Small to Large</option>
                    </select>
                </div>
            </div>
            <div class="product-grid" id="product-grid">
                <p class="loading-message">Loading vintage treasures, please wait...</p>
            </div>
            <div id="no-results" class="no-results-message" style="display: none;">
                <p>No pendants found matching your criteria.</p>
                <p>Try adjusting your filters or <button class="clear-filters-btn" type="button">clearing them</button> to see more items.</p>
            </div>
        </section>
    </main>

    <!-- Product Detail Modal -->
    <div id="product-detail-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-product-title" aria-hidden="true">
        <div class="modal-content">
            <button class="close-modal icon-button" aria-label="Close product details">✕</button>
            <div class="modal-body">
                <div class="product-images">
                    <img src="" alt="Product Image" class="main-image">
                    <div class="image-carousel-nav">
                        <button class="prev-img" aria-label="Previous image">‹</button>
                        <button class="next-img" aria-label="Next image">›</button>
                    </div>
                    <div class="thumbnail-nav">
                        <!-- Thumbnails dynamically generated here -->
                    </div>
                </div>
                <div class="product-info">
                    <h2 id="modal-product-title"></h2>
                    <p class="product-price"></p>
                    <p class="product-description"></p>
                    <h3>Details</h3>
                    <table class="product-metadata">
                        <!-- Metadata rows dynamically generated here -->
                    </table>
                    <button class="add-to-cart-btn button-primary">Add to Cart</button>
                    <button class="add-to-wishlist-btn button-secondary">♡ Add to Wishlist</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Sidebar/Modal -->
    <div id="cart-sidebar" class="sidebar cart-panel" role="dialog" aria-modal="true" aria-labelledby="cart-title" aria-hidden="true">
        <div class="cart-header">
            <h2 id="cart-title">Your Cart</h2>
            <button class="close-cart icon-button" aria-label="Close cart">✕</button>
        </div>
        <div class="cart-items" id="cart-items">
            <p class="empty-cart-message">Your cart is empty.</p>
        </div>
        <div class="cart-summary">
            <p>Subtotal: <span id="cart-subtotal">£0.00</span></p>
            <p>VAT (20% est.): <span id="cart-vat">£0.00</span></p>
            <p class="cart-total">Total: <span id="cart-total">£0.00</span></p>
            <button class="checkout-btn button-primary">Proceed to Checkout</button>
            <p class="cart-disclaimer">Shipping calculated at checkout.</p>
        </div>
    </div>

    <!-- Checkout Mockup (in-page) -->
    <section id="checkout-page" class="checkout-page" style="display: none;" aria-labelledby="checkout-title">
        <h1 id="checkout-title">Checkout</h1>
        <form class="checkout-form">
            <h2>Shipping Information</h2>
            <div class="form-group">
                <label for="full-name">Full Name</label>
                <input type="text" id="full-name" required aria-required="true" autocomplete="name">
            </div>
            <div class="form-group">
                <label for="address-line1">Address Line 1</label>
                <input type="text" id="address-line1" required aria-required="true" autocomplete="street-address">
            </div>
            <div class="form-group">
                <label for="city">City</label>
                <input type="text" id="city" required aria-required="true" autocomplete="address-level2">
            </div>
            <div class="form-group">
                <label for="postcode">Postcode</label>
                <input type="text" id="postcode" required aria-required="true" autocomplete="postal-code">
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" required aria-required="true" autocomplete="email">
            </div>
            <h2>Payment (Mock)</h2>
            <p>Payment processing is simulated. No real transactions occur.</p>
            <button type="submit" class="button-primary place-order-btn">Place Order (Mock)</button>
            <button type="button" class="button-secondary back-to-shop-btn">Continue Shopping</button>
        </form>
    </section>

    <footer class="main-footer">
        <div class="footer-grid">
            <div class="footer-section contact-info">
                <h3>Contact Us</h3>
                <p>Email: <a href="mailto:info@heritagetrove.com">info@heritagetrove.com</a></p>
                <p>Phone: +44 123 456 7890</p>
            </div>
            <div class="footer-section newsletter-signup">
                <h3>Stay Connected</h3>
                <form class="newsletter-form">
                    <input type="email" placeholder="Your email address" aria-label="Enter email for newsletter">
                    <button type="submit">Subscribe</button>
                </form>
            </div>
            <div class="footer-section social-media">
                <h3>Follow Us</h3>
                <div class="social-icons">
                    <a href="#" aria-label="Visit us on Facebook">FB</a>
                    <a href="#" aria-label="Visit us on Instagram">IG</a>
                    <a href="#" aria-label="Visit us on Pinterest">PI</a>
                </div>
            </div>
            <div class="footer-section legal-links">
                <h3>Information</h3>
                <ul>
                    <li><a href="#">Shipping & Returns</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Service</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2023 The Heritage Trove. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // === Global State & Constants ===
        const CSV_URL = 'https://raw.githubusercontent.com/Stepzach/pdesport/refs/heads/main/Pendants%20-%20Sheet1.csv';
        const FADE_IN_CLASS = 'fade-in';
        const CATEGORIES = {
            'Country(s) of origin': 'Country',
            'Material': 'Material',
            'Shape': 'Shape',
            'Condition': 'Condition',
            'Year(s)': 'Year',
            'Price (£)': 'Price'
        };
        const TEXT_SEARCH_FIELDS = [
            'Country(s) of origin', 'City / Landmark', 'Year(s)', 'Initial(s)', 'Symbol(s)',
            'Person', 'Purpose', 'Animal', 'Sport', 'Material', 'Shape', 'Condition'
        ];

        let allProducts = [];
        let filteredAndSortedProducts = [];
        let currentFilters = {
            search: '',
            categories: {}, // e.g., { 'Country': ['Italy', 'France'], 'Material': ['Bronze'] }
            yearRange: [], // [min, max]
            priceRange: [], // [min, max]
            quickFilter: ''
        };
        let currentSort = 'relevance';

        // Cart & Wishlist
        let cart = JSON.parse(localStorage.getItem('cart') || '[]');
        let wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');

        // DOM Elements
        const productGrid = document.getElementById('product-grid');
        const searchInput = document.getElementById('search-input');
        const filtersPanel = document.getElementById('filters-panel');
        const dynamicFiltersContainer = document.getElementById('dynamic-filters-container');
        const quickFiltersContainer = document.getElementById('quick-filters-container');
        const sortBySelect = document.getElementById('sort-by');
        const activeFiltersSummary = document.getElementById('active-filters-summary');
        const noResultsMessage = document.getElementById('no-results');
        const clearAllFiltersBtn = document.getElementById('clear-all-filters');
        const loadingMessage = document.querySelector('.loading-message');

        const productDetailModal = document.getElementById('product-detail-modal');
        const modalProductName = document.getElementById('modal-product-title');
        const modalProductPrice = productDetailModal.querySelector('.product-price');
        const modalProductDescription = productDetailModal.querySelector('.product-description');
        const modalMetadataTable = productDetailModal.querySelector('.product-metadata');
        const modalMainImage = productDetailModal.querySelector('.product-images .main-image');
        const modalThumbnailNav = productDetailModal.querySelector('.thumbnail-nav');
        const modalPrevBtn = productDetailModal.querySelector('.prev-img');
        const modalNextBtn = productDetailModal.querySelector('.next-img');
        const addToCartModalBtn = productDetailModal.querySelector('.add-to-cart-btn');
        const addToWishlistModalBtn = productDetailModal.querySelector('.add-to-wishlist-btn');

        const cartSidebar = document.getElementById('cart-sidebar');
        const cartToggleBtn = document.querySelector('.cart-toggle');
        const cartCloseBtn = cartSidebar.querySelector('.close-cart');
        const cartItemsContainer = document.getElementById('cart-items');
        const cartSubtotalSpan = document.getElementById('cart-subtotal');
        const cartVATSpan = document.getElementById('cart-vat');
        const cartTotalSpan = document.getElementById('cart-total');
        const cartCountSpan = document.querySelector('.cart-count');
        const cartCheckoutBtn = cartSidebar.querySelector('.checkout-btn');
        const emptyCartMessage = cartItemsContainer.querySelector('.empty-cart-message');

        const checkoutPage = document.getElementById('checkout-page');
        const checkoutForm = checkoutPage.querySelector('.checkout-form');
        const backToShopBtn = checkoutPage.querySelector('.back-to-shop-btn');

        const backdrop = document.getElementById('backdrop');

        // Debounce function
        const debounce = (func, delay) => {
            let timeout;
            return function(...args) {
                const context = this;
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(context, args), delay);
            };
        };

        // === Product Data Fetching & Processing ===
        async function fetchProducts() {
            try {
                const response = await fetch(CSV_URL);
                const csvText = await response.text();
                return parseCSV(csvText);
            } catch (error) {
                console.error("Error fetching or parsing product data:", error);
                productGrid.innerHTML = '<p class="loading-message">Failed to load products. Please try again later.</p>';
                return [];
            }
        }

        function parseCSV(csvText) {
            const rows = csvText.trim().split('\n');
            // Headers: clean up names by removing quotes and extra spaces
            const headers = rows[0].split(',').map(h => h.trim().replace(/"/g, ''));

            const products = rows.slice(1).map((row, index) => {
                // Robust CSV splitting to handle commas within quoted strings
                const values = row.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g) || [];
                // Clean values by removing quotes
                const cleanedValues = values.map(v => v.trim().replace(/^"|"$/g, ''));

                let product = {};
                headers.forEach((header, i) => {
                    product[header] = cleanedValues[i] || '';
                });

                // Type conversions and cleaning
                product['Price (£)'] = parseFloat(product['Price (£)'].replace(/[^0-9.]/g, '')) || 0;
                product['Year(s)'] = parseInt(product['Year(s)']) || 0;
                product['Size (cm)'] = parseFloat(product['Size (cm)'].replace(/[^0-9.]/g, '')) || 0;

                // Generate a simple unique ID for each product if not present
                product.id = `product-${Date.now()}-${index}`;

                // Generate a placeholder description
                const titleKeywords = [
                    product['Material'], product['Shape'], product['Symbol(s)'], product['City / Landmark']
                ].filter(Boolean).slice(0, 3).join(' - ');
                product.derivedTitle = product['Material'] || 'Vintage' + (titleKeywords ? ' - ' + titleKeywords : '');
                if (!product.derivedTitle.trim()) {
                    product.derivedTitle = 'Exquisite Vintage Pendant';
                }

                // Placeholder description
                const material = product['Material'] || 'a unique alloy';
                const shape = product['Shape'] || 'classic form';
                const country = product['Country(s) of origin'] || 'an unrecorded origin';
                const year = product['Year(s)'] || 'an earlier era';
                product.description = `This exquisite vintage pendant, a testament to timeless craftsmanship, features a captivating ${shape} design. Crafted from ${material}, it evokes a rich sense of history and allure. Originating from ${country} around ${year}, this piece carries stories from the past, making it a truly unique acquisition. Its intricate details and aged patina add to its singular charm, perfect for collectors or as a distinctive personal statement.`;


                return product;
            });
            return products;
        }

        // === Product Rendering ===
        function renderProductCards(products) {
            productGrid.innerHTML = '';
            if (products.length === 0) {
                noResultsMessage.style.display = 'block';
                return;
            }
            noResultsMessage.style.display = 'none';

            products.forEach(product => {
                const card = document.createElement('article');
                card.classList.add('product-card');
                card.setAttribute('data-id', product.id);
                card.tabIndex = 0; // Make card keyboard focusable
                card.setAttribute('role', 'button');
                card.setAttribute('aria-label', `View details for ${product.derivedTitle}`);

                card.innerHTML = `
                    <div class="image-container">
                        <img data-src="${product['Image front']}" alt="${product.derivedTitle} - Front View" loading="lazy">
                    </div>
                    <div class="product-card-info">
                        <h3 class="product-card-title">${product.derivedTitle}</h3>
                        <p class="product-card-meta">${product['Material']} • ${product['Shape']}</p>
                        <p class="product-card-price">£${product['Price (£)'].toFixed(2)}</p>
                        <div class="product-card-actions">
                            <button class="button-primary view-details-btn">View</button>
                            <button class="button-secondary add-to-wishlist-btn" data-product-id="${product.id}">♡ Wishlist</button>
                        </div>
                    </div>
                `;
                productGrid.appendChild(card);
            });

            // Lazy load images with Intersection Observer for better control (optional, but good for blur-up/advanced lazy load)
            const lazyImages = productGrid.querySelectorAll('img[data-src]');
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.add(FADE_IN_CLASS);
                        observer.unobserve(img);
                    }
                });
            }, { rootMargin: '0px 0px 200px 0px' }); // Load when 200px from viewport

            lazyImages.forEach(img => imageObserver.observe(img));

            // Attach event listeners for detail modal and wishlist from new cards
            productGrid.querySelectorAll('.product-card').forEach(card => {
                const productId = card.dataset.id;
                card.querySelector('.view-details-btn').addEventListener('click', (e) => {
                    e.stopPropagation(); // Prevent card click from firing twice
                    openProductDetail(productId);
                });
                card.addEventListener('click', () => openProductDetail(productId)); // For card area click
                card.querySelector('.add-to-wishlist-btn').addEventListener('click', (
